
<!DOCTYPE html>
<html>
<head>
    <title>GeoTrace - Movement Intelligence</title>
    <meta charset="utf-8">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0d0d0d;
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .header {
            background: #111;
            padding: 14px 24px;
            border-bottom: 1px solid #222;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .header h1 { font-size: 20px; color: #00ffcc; }
        .header span { font-size: 12px; color: #666; }
        .stats-bar {
            display: flex;
            gap: 10px;
            padding: 12px 24px;
            background: #111;
            border-bottom: 1px solid #222;
            flex-wrap: wrap;
        }
        .stat-card {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 10px 18px;
            min-width: 140px;
        }
        .stat-label {
            font-size: 10px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #00ffcc;
            margin-top: 2px;
        }
        .stat-value.danger { color: #ff4444; }
        .main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        .sidebar {
            width: 260px;
            background: #111;
            border-right: 1px solid #222;
            padding: 16px;
            overflow-y: auto;
            flex-shrink: 0;
        }
        .sidebar h3 {
            font-size: 11px;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            margin-top: 16px;
        }
        .sidebar h3:first-child { margin-top: 0; }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 7px 0;
            border-bottom: 1px solid #1a1a1a;
            font-size: 13px;
        }
        .info-row span { color: #888; }
        .info-row b {
            color: #fff;
            text-align: right;
            max-width: 140px;
            font-weight: 500;
        }
        .risk-box {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
        }
        .risk-title {
            font-size: 11px;
            color: #ff4444;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .risk-bar-bg {
            background: #333;
            border-radius: 4px;
            height: 8px;
            overflow: hidden;
        }
        .risk-bar-fill {
            height: 100%;
            width: 80%;
            background: linear-gradient(90deg, #ff8800, #ff4444);
            border-radius: 4px;
        }
        .risk-score {
            font-size: 24px;
            font-weight: bold;
            color: #ff4444;
            margin-top: 6px;
        }
        .risk-sub {
            font-size: 11px;
            color: #555;
            margin-top: 2px;
        }
        .map-container { flex: 1; }
        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .footer {
            background: #111;
            border-top: 1px solid #222;
            padding: 8px 24px;
            display: flex;
            gap: 32px;
            font-size: 12px;
            color: #555;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>GeoTrace</h1>
        <span>Movement Intelligence Dashboard &nbsp;|&nbsp;
              2024-11-23 - 2026-02-27</span>
        <span id="live-clock" style="
            margin-left: auto;
            font-size: 13px;
            color: #00ffcc;
            font-family: monospace;
            letter-spacing: 1px;
        "></span>
        <script>
            function updateClock() {
                const now = new Date();
                const timeStr = now.toLocaleTimeString('en-IN', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: true
                });
                const dateStr = now.toLocaleDateString('en-IN', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric'
                });
                document.getElementById('live-clock').textContent
                    = dateStr + '  ' + timeStr;
            }
            updateClock();
            setInterval(updateClock, 1000);
        </script>
    </div>

    <div class="stats-bar">
        <div class="stat-card">
            <div class="stat-label">Locations</div>
            <div class="stat-value">19</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Total Distance</div>
            <div class="stat-value">65.89 km</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Avg Daily</div>
            <div class="stat-value">8.24 km</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Most Visited</div>
            <div class="stat-value" style="font-size:13px; margin-top:4px;">
                Cluster 0 (17.4522, 78.3771) • visits 5
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Anomalies</div>
            <div class="stat-value danger">3</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Images Analyzed</div>
            <div class="stat-value">19</div>
        </div>
    </div>

    <div class="main">

        <div class="sidebar">
            <h3>Behavioral Intel</h3>
            <div class="info-row">
                <span>Home</span>
                <b>Cluster 0 (17.4522, 78.3771) • visits 5</b>
            </div>
            <div class="info-row">
                <span>Work</span>
                <b>Cluster 1 (17.3986, 78.4892) • visits 7</b>
            </div>
            <div class="info-row">
                <span>Peak Hour</span>
                <b>15:00 - 15:59</b>
            </div>
            <div class="info-row">
                <span>Most Active</span>
                <b>Saturday</b>
            </div>
            <div class="info-row">
                <span>Night Moves</span>
                <b>0.0%</b>
            </div>

            <h3>Privacy Risk</h3>
            <div class="risk-box">
                <div class="risk-title">Exposure Score</div>
                <div class="risk-bar-bg">
                    <div class="risk-bar-fill"></div>
                </div>
                <div class="risk-score">8 / 10</div>
                <div class="risk-sub">
                    High — Home/work clusters likely identifiable
                </div>
            </div>
        </div>

        <div class="map-container">
            <iframe src="map.html"></iframe>
        </div>

    </div>

    <div class="footer">
        <span>
            GREEN = High Confidence &nbsp;|&nbsp;
            ORANGE = Medium Confidence &nbsp;|&nbsp;
            RED = Low / Unclustered
        </span>
        <span style="margin-left:auto; display:flex; align-items:center; gap:12px;">
            <button onclick="exportCSV()" style="
                background: #00ffcc;
                color: #000;
                border: none;
                padding: 6px 16px;
                border-radius: 6px;
                font-size: 12px;
                font-weight: bold;
                cursor: pointer;
            ">Export CSV</button>
            Built with GeoTrace — Member 4
        </span>
        <script>
        function exportCSV() {
            const data = [{"image_id": "20241123_113345.jpg", "lat": 17.45242909972222, "lon": 78.37685529999999, "timestamp": "2024-11-23T11:33:45", "cluster_id": 0, "confidence": "MEDIUM"}, {"image_id": "20241123_113427.jpg", "lat": 17.452442099722223, "lon": 78.37691479972221, "timestamp": "2024-11-23T11:34:27", "cluster_id": 0, "confidence": "MEDIUM"}, {"image_id": "20241123_113431.jpg", "lat": 17.452442099722223, "lon": 78.37691479972221, "timestamp": "2024-11-23T11:34:32", "cluster_id": 0, "confidence": "MEDIUM"}, {"image_id": "20241123_121335.jpg", "lat": 17.450886499722223, "lon": 78.37789129999999, "timestamp": "2024-11-23T12:13:35", "cluster_id": 0, "confidence": "MEDIUM"}, {"image_id": "20241123_132526.jpg", "lat": 17.452871999722223, "lon": 78.37678079999999, "timestamp": "2024-11-23T13:25:26", "cluster_id": 0, "confidence": "MEDIUM"}, {"image_id": "20250329_180411.jpg", "lat": 17.397280899722222, "lon": 78.48997799972223, "timestamp": "2025-03-29T18:04:11", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20250613_174623.jpg", "lat": 17.396913299999998, "lon": 78.4907457, "timestamp": "2025-06-13T17:46:23", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20250908_140120.jpg", "lat": 17.3967016, "lon": 78.49007629972222, "timestamp": "2025-09-08T14:01:20", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20250908_140137.jpg", "lat": 17.3967469, "lon": 78.49010119972222, "timestamp": "2025-09-08T14:01:37", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20251024_154737.jpg", "lat": 17.361081599722223, "lon": 78.47453439972223, "timestamp": "2025-10-24T15:47:37", "cluster_id": 2, "confidence": "MEDIUM"}, {"image_id": "20251024_154905.jpg", "lat": 17.361129399722223, "lon": 78.4745451, "timestamp": "2025-10-24T15:49:05", "cluster_id": 2, "confidence": "MEDIUM"}, {"image_id": "20251024_154907.jpg", "lat": 17.361129399722223, "lon": 78.4745451, "timestamp": "2025-10-24T15:49:07", "cluster_id": 2, "confidence": "MEDIUM"}, {"image_id": "20251024_155203.jpg", "lat": 17.3610979, "lon": 78.47448599972222, "timestamp": "2025-10-24T15:52:03", "cluster_id": 2, "confidence": "MEDIUM"}, {"image_id": "20251213_194524.jpg", "lat": 17.400767499999997, "lon": 78.48777139972222, "timestamp": "2025-12-13T19:45:24", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20251213_201602.jpg", "lat": 17.400855099999998, "lon": 78.4878644, "timestamp": "2025-12-13T20:16:02", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20251213_201610.jpg", "lat": 17.400855099999998, "lon": 78.4878644, "timestamp": "2025-12-13T20:16:10", "cluster_id": 1, "confidence": "HIGH"}, {"image_id": "20260220_124139.jpg", "lat": 17.393910972222223, "lon": 78.62133399999999, "timestamp": "2026-02-20T12:41:40", "cluster_id": -1, "confidence": "LOW"}, {"image_id": "20260227_095823.jpg", "lat": 17.5457855, "lon": 78.40349989972223, "timestamp": "2026-02-27T09:58:23", "cluster_id": -1, "confidence": "LOW"}, {"image_id": "20260227_095850.jpg", "lat": 17.545794699722222, "lon": 78.4035099, "timestamp": "2026-02-27T09:58:50", "cluster_id": -1, "confidence": "LOW"}];
            const headers = ['image_id','lat','lon','timestamp','cluster_id','confidence'];
            const rows = data.map(p =>
                headers.map(h => (p[h] !== undefined ? p[h] : '')).join(',')
            );
            const csv = [headers.join(','), ...rows].join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url  = URL.createObjectURL(blob);
            const a    = document.createElement('a');
            a.href     = url;
            a.download = 'geotrace_export.csv';
            a.click();
            URL.revokeObjectURL(url);
        }
        </script>
    </div>

</body>
</html>
